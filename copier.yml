# CONFIGURATION -------------------------
_min_copier_version: "9"
_envops:
  autoescape: false
  keep_trailing_newline: true
_subdirectory: project
_templates_suffix: .jinja
_preserve_symlinks: true
_jinja_extensions:
- copier_template_extensions.TemplateExtensionLoader
- extensions.py:CurrentYearExtension
- extensions.py:GitExtension
- extensions.py:SlugifyExtension
- extensions.py:GitHubIDsforGiscusExtension
_skip_if_exists:
- CHANGELOG.md

_exclude:
- "{% if not use_ci %}.github/workflows/ci.yml{% endif %}"
- "{% if not use_semantic_release %}.github/workflows/release.yml{% endif %}"

# PROMPT --------------------------------
project_name:
  type: str
  help: Your project name

project_description:
  type: str
  help: Your project description

project_type:
  type: str
  help: What type of project is this?
  default: package
  choices:
    Application (simple script with main.py): app
    Library (importable package, no CLI): lib
    Package (installable with CLI entry point): package

author_fullname:
  type: str
  help: Your full name
  default: "{{ git_user_name }}"

author_email:
  type: str
  help: Your email
  default: "{{ git_user_email }}"

author_username:
  type: str
  help: Your username (e.g. on GitHub)
  default: "{{ git_user_username }}"

repository_provider:
  type: str
  help: Your repository provider
  default: github.com
  choices:
  - github.com
  when: false

repository_namespace:
  type: str
  help: Your repository namespace
  default: "{{ author_username }}"
  when: false

repository_name:
  type: str
  help: Your repository name
  default: "{{ project_name | slugify }}"
  when: false

copyright_holder:
  type: str
  help: The name of the person/entity holding the copyright
  default: "{{ author_fullname }}"
  when: false

copyright_holder_email:
  type: str
  help: The email of the person/entity holding the copyright
  default: "{{ author_email }}"
  when: false

copyright_date:
  type: str
  help: The copyright date
  default: "{{ current_year }}"
  when: false

copyright_license:
  type: str
  help: Your project's license
  default: ISC
  choices:
    Academic Free License v3.0: AFL-3.0
    Apache License 2.0: Apache-2.0
    Artistic License 2.0: Artistic-2.0
    BSD 2-Clause "Simplified" License: BSD-2-Clause
    BSD 3-Clause Clear License: BSD-3-Clause-Clear
    BSD 3-Clause "New" or "Revised" License: BSD-3-Clause
    Boost Software License 1.0: BSL-1.0
    Creative Commons Attribution 4.0 International: CC-BY-4.0
    Creative Commons Attribution Share Alike 4.0 International: CC-BY-SA-4.0
    Creative Commons Zero v1.0 Universal: CC0-1.0
    Do What The F*ck You Want To Public License: WTFPL
    Educational Community License v2.0: ECL-2.0
    Eclipse Public License 1.0: EPL-1.0
    Eclipse Public License 2.0: EPL-2.0
    European Union Public License 1.1: EUPL-1.1
    European Union Public License 1.2: EUPL-1.2
    GNU Affero General Public License v3.0: AGPL-3.0
    GNU General Public License v2.0 only: GPL-2.0
    GNU General Public License v3.0 only: GPL-3.0
    GNU Lesser General Public License v2.1 only: LGPL-2.1
    GNU Lesser General Public License v3.0 only: LGPL-3.0
    ISC License: ISC
    LaTeX Project Public License v1.3c: LPPL-1.3c
    MIT License: MIT
    Mozilla Public License 2.0: MPL-2.0
    Microsoft Public License: MS-PL
    Microsoft Reciprocal License: MS-RL
    University of Illinois/NCSA Open Source License: NCSA
    SIL Open Font License 1.1: OFL-1.1
    Open Software License 3.0: OSL-3.0
    PostgreSQL License: PostgreSQL
    The Unlicense: Unlicense
    zlib License: Zlib

python_package_distribution_name:
  type: str
  help: Your Python package distribution name (for `pip install NAME`)
  default: "{{ project_name | slugify }}"
  when: false

python_package_import_name:
  type: str
  help: Your Python package import name (for `import NAME` in Python code)
  default: "{{ project_name | slugify('_') }}"
  when: false

python_package_command_line_name:
  type: str
  help: Your CLI name if any (for use in the shell)
  default: "{{ project_name | slugify }}"
  when: false

use_ci:
  type: bool
  help: Enable GitHub Actions CI workflow? (testing, linting, type checking)
  default: true

use_semantic_release:
  type: bool
  help: Enable semantic-release workflow? (automated versioning, changelog, GitHub releases)
  default: true
  when: "{{ use_ci }}"

publish_to_pypi:
  type: bool
  help: Will you publish this package to PyPI?
  default: true
  when: "{{ use_semantic_release }}"

use_blacksmith_runners:
  type: bool
  help: Use Blacksmith.sh runners? (2x faster, 75% more cost-efficient than GitHub-hosted)
  default: true
  when: "{{ use_ci }}"

use_polar:
  type: bool
  help: Enable Polar.sh sponsorship? (requires account at polar.sh)
  default: false

# TASKS --------------------------------
_tasks:
  - "uv sync"
  - "test -d .git && uv run prek install || true"
  - "test -f .copier-answers.yml && rm -f duties.py Makefile scripts/make scripts/make.py || true"
  - "command -v gh >/dev/null && gh repo view --json nameWithOwner -q .nameWithOwner >/dev/null 2>&1 && gh repo edit --delete-branch-on-merge && echo 'âœ“ Enabled delete-branch-on-merge' || true"
  - "test -d .git && echo 'ðŸŽ‰ Project scaffolded successfully! Run: uv run prek autoupdate' || echo 'ðŸŽ‰ Project scaffolded successfully! Run: git init && uv run prek install && uv run prek autoupdate'"
